import{a as O,b as H,c as G,d as P,e as j,f as q}from"./chunk-3KF55HPP.js";import{F as I,G as C,Ja as y,K as d,L as p,La as V,Oa as R,Qa as A,U as F,V as D,W as m,Z as L,_ as k,a as b,b as T,ca as g,fa as u,ga as x,ha as M,ia as $,ja as o,ka as c,ma as S,oa as _,pa as a,ra as l,sa as B,ta as f,va as v,wa as w,ya as E}from"./chunk-ZTTNRFGP.js";function Q(e,t){if(e&1&&(o(0,"h5",4),l(1),c(),o(2,"h5",5),l(3),w(4,"date"),c()),e&2){let n=a();m(1),f(" Description: ",n.checklist.description," "),m(2),f("upd: ",E(4,2,n.checklist.date,"short"),"")}}var z=(()=>{let t=class t{constructor(){this.addItem=new k}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-checklist-header"]],inputs:{checklist:"checklist"},outputs:{addItem:"addItem"},standalone:!0,features:[v],decls:9,vars:2,consts:[["routerLink","/home",1,"btn","btn-primary"],[1,"my-4"],[1,"my-2"],[1,"btn","btn-success",3,"click"],[1,"my-3"],[1,"my-3","text-secondary"]],template:function(i,r){i&1&&(o(0,"header")(1,"a",0),l(2,"\u2190 Back"),c(),o(3,"h1",1),l(4),c(),u(5,Q,5,5),o(6,"div",2)(7,"button",3),_("click",function(){return r.addItem.emit()}),l(8,"Add item"),c()()()),i&2&&(m(4),f(" ",r.checklist.title," "),m(1),x(5,r.checklist.description?5:-1))},dependencies:[A,V,y],encapsulation:2});let e=t;return e})();var U=(e,t)=>t.id;function W(e,t){e&1&&(o(0,"span",3),l(1,"\u2705"),c())}function X(e,t){if(e&1&&(o(0,"span",11),l(1),c()),e&2){let n=a().$implicit;m(1),B(n.description)}}function Y(e,t){if(e&1){let n=S();o(0,"li",2)(1,"h3",3),l(2,"\u2022"),c(),u(3,W,2,0,"span",4),o(4,"span",5)(5,"span"),l(6),c(),u(7,X,2,1,"span",6),c(),o(8,"p",7),l(9),w(10,"date"),c(),o(11,"div")(12,"button",8),_("click",function(){let r=d(n).$implicit,h=a();return p(h.toggle.emit(r.id))}),l(13,"Check"),c(),o(14,"button",9),_("click",function(){let r=d(n).$implicit,h=a();return p(h.edit.emit(r))}),l(15,"Edit"),c(),o(16,"button",10),_("click",function(){let r=d(n).$implicit,h=a();return p(h.remove.emit(r.id))}),l(17,"Delete"),c()()()}if(e&2){let n=t.$implicit;m(3),x(3,n.checked?3:-1),m(3),B(n.title),m(1),x(7,n.description?7:-1),m(2),f("upd: ",E(10,4,n.date,"short"),"")}}function Z(e,t){e&1&&(o(0,"div")(1,"h2"),l(2,"Add an item"),c(),o(3,"p"),l(4,"Click the add button to add your first item to this quicklist"),c()())}var J=(()=>{let t=class t{constructor(){this.toggle=new k,this.reset=new k,this.remove=new k,this.edit=new k}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-checklist-item-list"]],inputs:{checklistItems:"checklistItems"},outputs:{toggle:"toggle",reset:"reset",remove:"remove",edit:"edit"},standalone:!0,features:[v],decls:7,vars:1,consts:[[1,"btn-lg","btn-secondary",3,"click"],[1,"list-group","m-3"],[1,"list-group-item","d-flex","align-items-center","my-2"],[1,"mx-2"],["class","mx-2"],[1,"col-2","d-flex","flex-column"],["class","text-secondary"],[1,"my-2","text-secondary"],[1,"btn","btn-success","mx-1",3,"click"],[1,"btn","btn-primary","mx-1",3,"click"],[1,"btn","btn-danger","mx-1",3,"click"],[1,"text-secondary"],["class","list-group-item d-flex align-items-center my-2"]],template:function(i,r){i&1&&(o(0,"section")(1,"button",0),_("click",function(){return r.reset.emit()}),l(2,"Reset All"),c(),o(3,"ul",1),M(4,Y,18,7,"li",12,U,!1,Z,5,0),c()()),i&2&&(m(4),$(r.checklistItems))},dependencies:[V,y],encapsulation:2});let e=t;return e})();function ee(e,t){if(e&1){let n=S();o(0,"div",3)(1,"app-checklist-header",4),_("addItem",function(){d(n);let i=a();return p(i.checklistItemBeingEdited.set({}))}),c(),o(2,"app-checklist-item-list",5),_("reset",function(){d(n);let i=a();return p(i.checklistItemService.reset$.next())})("remove",function(i){d(n);let r=a();return p(r.checklistItemService.remove$.next(i))})("edit",function(i){d(n);let r=a();return p(r.checklistItemBeingEdited.set(i))})("toggle",function(i){d(n);let r=a();return p(r.checklistItemService.toggle$.next(i))}),c()()}if(e&2){let n=a();m(1),g("checklist",t),m(1),g("checklistItems",n.items())}}function te(e,t){if(e&1){let n=S();o(0,"app-form-modal",6),_("save",function(){d(n);let i=a();return p(i.onSaveChecklistItem())})("close",function(){d(n);let i=a();return p(i.checklistItemBeingEdited.set(null))}),c()}if(e&2){let n=a();g("formGroup",n.checklistItemForm)}}var Ve=(()=>{let t=class t{constructor(){this.checklistService=I(q),this.route=I(R),this.formBuilder=I(H),this.checklistItemService=I(j),this.checklistItemBeingEdited=D(null),this.params=P(this.route.paramMap),this.checklist=F(()=>this.checklistService.checklists().find(s=>s.id===this.params()?.get("id"))),this.items=F(()=>this.checklistItemService.checklistItems().filter(s=>s.checklistId===this.params()?.get("id"))),this.checklistItemForm=this.formBuilder.nonNullable.group({title:[""],description:[""]}),L(()=>{let s=this.checklistItemBeingEdited();s?this.checklistItemForm.patchValue({title:s.title,description:s.description}):this.checklistItemForm.reset()})}onSaveChecklistItem(){this.checklistItemBeingEdited()?.id?this.checklistItemService.edit$.next({id:this.checklistItemBeingEdited().id,data:T(b({},this.checklistItemForm.getRawValue()),{date:new Date})}):this.checklistItemService.add$.next({item:T(b({},this.checklistItemForm.getRawValue()),{date:new Date}),checklistId:this.checklist()?.id})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-checklist"]],standalone:!0,features:[v],decls:4,vars:2,consts:[[1,"border","m-5","shadow-lg","rounded"],["class","m-5"],[3,"isOpen"],[1,"m-5"],[3,"checklist","addItem"],[3,"checklistItems","reset","remove","edit","toggle"],["title","Create item",3,"formGroup","save","close"]],template:function(i,r){if(i&1&&(o(0,"div",0),u(1,ee,3,2,"div",1),o(2,"app-modal",2),u(3,te,1,1,"ng-template"),c()()),i&2){let h;m(1),x(1,(h=r.checklist())?1:-1,h),m(1),g("isOpen",!!r.checklistItemBeingEdited())}},dependencies:[z,O,G,J],encapsulation:2});let e=t;return e})();export{Ve as default};
